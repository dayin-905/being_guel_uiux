<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>전체 정책 보기 | 쓱쓱</title>
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css">
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-orange': '#F48245',
                        'primary-teal': '#4A9EA8',
                        'primary-beige': '#D9B36C'
                    },
                    fontFamily: { sans: ['Pretendard', 'sans-serif'] },
                    boxShadow: {
                        'floating': '0 20px 40px -5px rgba(0, 0, 0, 0.15), 0 10px 20px -5px rgba(0, 0, 0, 0.1)',
                    }
                }
            }
        }
    </script>
    <style>
        .perspective-wrap {
            perspective: 1000px;
            transform-style: preserve-3d;
        }

        .policy-card {
            transform-style: preserve-3d;
            /* 텍스트 선명도를 위한 설정 */
            backface-visibility: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transform: translateZ(0);
            outline: none;
            will-change: transform;
            /* 성능 최적화 */
        }

        /* [수정] Glare(광택) CSS 완전 삭제 */

        /* [수정] 텍스트(.card-content)의 3D 속성을 제거하여 선명도 확보 */
        .card-content {
            transform: translateZ(0);
            /* 바닥에 딱 붙임 (선명함) */
            background-color: #fff;
            /* 배경색 명시 */
        }

        /* 이미지는 3D 효과 유지 (입체감) */
        .card-image {
            transform-style: preserve-3d;
            transform: translateZ(20px);
        }
    </style>
</head>

<body class="bg-gray-50 font-sans">
    <nav
        class="sticky top-0 z-50 w-full border-b border-gray-100 bg-white/70 backdrop-blur-md transition-all duration-300">
        <div class="mx-auto flex h-[80px] max-w-[1200px] items-center justify-center md:justify-between px-5">
            <a href="/" class="hidden md:flex items-center transition-opacity hover:opacity-80">
                <img src="/static/images/logo.svg"
                    onerror="this.src='https://placehold.co/100x40/transparent/333?text=LOGO'" alt="Logo"
                    class="h-10 w-auto">
            </a>
            <ul class="flex gap-2 md:gap-3">
                <li><a href="/"
                        class="flex items-center justify-center rounded-full px-4 py-2 text-[14px] md:text-[15px] font-bold text-gray-600 bg-gray-100 hover:bg-gray-200 transition-all">Home</a>
                </li>
                <li><a href="/all.html"
                        class="flex items-center justify-center rounded-full px-4 py-2 text-[14px] md:text-[15px] font-bold text-white bg-primary-teal shadow-md transition-all">All
                        Policies</a></li>
                <li><a href="/mypage.html"
                        class="flex items-center justify-center rounded-full px-4 py-2 text-[14px] md:text-[15px] font-bold text-white bg-primary-orange shadow-md hover:bg-[#e06d2e] transition-all">My
                        Page</a></li>
                <li><a href="/about.html"
                        class="flex items-center justify-center rounded-full px-4 py-2 text-[14px] md:text-[15px] font-bold text-white bg-primary-beige shadow-md hover:bg-[#c49f5b] transition-all">About</a>
                </li>
            </ul>
        </div>
    </nav>

    <main class="max-w-[1200px] mx-auto px-5 py-10">
        <header class="text-center mb-16">
            <h1 class="text-3xl md:text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">정책 카드 컬렉션 ✨</h1>
            <p class="text-gray-500 text-lg">마우스를 올려보세요! 화면 크기에 맞춰 카드가 반응합니다.</p>
        </header>

        <div id="card-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 pb-10">
        </div>
    </main>

    <script>
        // 1. 카테고리 매핑 정보 추가 (이미지 파일명 연결용)
        const categoryMap = {
            "주거": "housing",
            "취업": "job",
            "금융": "finance",
            "복지": "welfare",
            "창업": "startup",
            "교육": "growth"
        };

        const policyData = [
            // [추가] 데이터에 colorCode 속성을 추가하여 보더 색상 매핑 (없으면 기본값 사용)
            { id: 1, title: "청년 안심 주택", category: "주거", img: "https://placehold.co/400x500/F48245/white?text=Housing", desc: "역세권 청년 주택 입주자 모집 공고입니다.", colorCode: "#F48245" },
            { id: 2, title: "취업 사관학교", category: "취업", img: "https://placehold.co/400x300/4A9EA8/white?text=Job", desc: "SW 개발자 데뷔 과정 무료 교육생 모집", colorCode: "#4A9EA8" },
            { id: 3, title: "학자금 대출 이자", category: "금융", img: "https://placehold.co/400x400/D9B36C/white?text=Loan", desc: "학자금 대출 이자 전액 지원", colorCode: "#D9B36C" },
            { id: 4, title: "마음 건강 상담소", category: "복지", img: "https://placehold.co/400x600/FF5A5F/white?text=Mind", desc: "전문 심리 상담사와 1:1 무료 상담", colorCode: "#FF5A5F" },
            { id: 5, title: "전세 보증금 반환", category: "주거", img: "https://placehold.co/400x350/333/white?text=Rent", desc: "전세 사기 걱정 없는 보증료 지원", colorCode: "#F48245" },
            { id: 6, title: "미래 청년 일자리", category: "취업", img: "https://placehold.co/400x450/4A9EA8/white?text=Future", desc: "신산업 분야 기업 매칭 및 인건비 지원", colorCode: "#4A9EA8" },
            { id: 7, title: "문화 예술 패스", category: "복지", img: "https://placehold.co/400x250/FF5A5F/white?text=Art", desc: "공연, 전시 관람비 10만원 지원", colorCode: "#FF5A5F" },
            { id: 8, title: "청년 대중교통비", category: "금융", img: "https://placehold.co/400x400/D9B36C/white?text=Transport", desc: "대중교통 이용요금 일부 환급", colorCode: "#D9B36C" }
        ].map(item => {
            // [핵심] 여기서 로컬 이미지 경로를 자동으로 만들어줍니다!
            const prefix = categoryMap[item.category] || "welfare";
            const imgIndex = (item.id % 5) + 1;
            // img 속성을 덮어씌움 (기존 url 삭제됨)
            item.img = `/static/images/card_images/${prefix}_${imgIndex}.webp`;
            return item;
        });

        function renderCards() {
            const container = document.getElementById('card-container');
            container.innerHTML = policyData.map(item => `
            <div class="perspective-wrap group h-full">
                <div class="policy-card relative bg-white rounded-xl overflow-hidden h-full flex flex-col border border-gray-100 shadow-sm transition-shadow" 
                     tabindex="0"
                     data-color="${item.colorCode}"> 
                    
                    <div class="card-image w-full bg-white flex items-end justify-center shrink-0 h-[200px] overflow-hidden">
                        <img src="${item.img}" alt="${item.title}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                    </div>

                    <div class="card-content text-left flex-grow flex flex-col justify-between p-5 z-20 relative">
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs font-bold text-primary-orange bg-orange-100 px-2 py-0.5 rounded">#${item.category}</span>
                            </div>
                            <h3 class="card-title mb-2 line-clamp-1 text-xl font-extrabold text-[#222] group-hover:text-primary-teal transition-colors">${item.title}</h3>
                            <p class="card-desc line-clamp-2 text-sm text-[#666] font-medium">${item.desc}</p>
                        </div>
                        <div class="card-date flex justify-between items-center mt-4 text-xs text-[#888] border-t pt-3 border-gray-100">
                            <span>2025.12.31 마감</span>
                            <i class="fa-solid fa-arrow-right text-gray-300 group-hover:text-primary-teal transition-transform group-hover:translate-x-1"></i>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');

            init3DEffect();
        }

        function init3DEffect() {
            const wrappers = document.querySelectorAll('.perspective-wrap');

            const getResponsiveSettings = () => {
                const width = window.innerWidth;

                if (width >= 1280) {
                    return { scale: 1.2, y: -15 };
                } else if (width >= 1024) {
                    return { scale: 1.15, y: -12 };
                } else if (width >= 640) {
                    return { scale: 1.08, y: -8 };
                } else {
                    return { scale: 1.03, y: -4 };
                }
            };

            wrappers.forEach(wrapper => {
                const card = wrapper.querySelector('.policy-card');
                const cardImage = wrapper.querySelector('.card-image img');

                // [추가 기능] 카드별 테두리 색상 가져오기
                const borderColor = card.dataset.color || '#4A9EA8';

                // --- 1. 진입 효과 (Hover & Focus) ---
                const handleEnter = () => {
                    const settings = getResponsiveSettings();

                    gsap.set(wrapper, { zIndex: 50 });

                    gsap.to(card, {
                        duration: 0.4,
                        scale: settings.scale,
                        y: settings.y,
                        // [추가 기능] 호버 시 카테고리 색상으로 Border 변경
                        borderColor: borderColor,
                        boxShadow: `0 30px 60px -10px rgba(0,0,0,0.25)`,
                        ease: "back.out(1.5)",
                        overwrite: "auto"
                    });
                };

                wrapper.addEventListener('mouseenter', handleEnter);
                card.addEventListener('focusin', handleEnter);


                // --- 2. 움직임 효과 (Tilt + Parallax) ---
                wrapper.addEventListener('mousemove', (e) => {
                    if (window.innerWidth < 768) return;

                    const rect = wrapper.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;

                    // 틸트 각도
                    const rotateX = ((y - centerY) / centerY) * -10;
                    const rotateY = ((x - centerX) / centerX) * 10;

                    gsap.to(card, {
                        duration: 0.2,
                        rotateX: rotateX,
                        rotateY: rotateY,
                        transformPerspective: 1000,
                        ease: "power1.out",
                        overwrite: "auto"
                    });

                    // 이미지는 반대로 움직여 깊이감 형성 (패럴랙스)
                    gsap.to(cardImage, {
                        duration: 0.2,
                        x: (x - centerX) * 0.05,
                        y: (y - centerY) * 0.05,
                        ease: "power1.out"
                    });

                    // [수정] 텍스트 패럴랙스 제거 (선명도 확보를 위해)
                    // 텍스트는 움직이지 않고 카드에 딱 붙어있게 합니다.
                });


                // --- 3. 나감 효과 (Reset) ---
                const handleLeave = () => {
                    gsap.delayedCall(0.3, () => { gsap.set(wrapper, { zIndex: 1 }); });

                    gsap.to(card, {
                        duration: 0.6,
                        scale: 1,
                        y: 0,
                        rotateX: 0,
                        rotateY: 0,
                        borderColor: '#e5e7eb', // 원래 회색(gray-200)으로 복구
                        boxShadow: "0 1px 2px 0 rgba(0, 0, 0, 0.05)",
                        ease: "power3.out",
                        overwrite: true
                    });

                    gsap.to(cardImage, {
                        duration: 0.6,
                        x: 0,
                        y: 0,
                        ease: "power3.out"
                    });
                };

                wrapper.addEventListener('mouseleave', handleLeave);
                card.addEventListener('focusout', handleLeave);
            });

            gsap.from(".perspective-wrap", {
                y: 50,
                opacity: 0,
                duration: 0.8,
                stagger: 0.1,
                ease: "power2.out"
            });
        }

        renderCards();
    </script>
</body>

</html>